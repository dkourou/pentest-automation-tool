#!/usr/bin/env bash

set -e

#
# make curl with control error code
#
run_curl_internal() {
  local temp_file_code=$1; shift;
  local temp_file_result=$1; shift;

  curl --noproxy '*' --silent --insecure \
    "$@" \
    --write-out "%{http_code}" \
    --output "${temp_file_result}" \
    >"${temp_file_code}" \
    2>/dev/null
}

run_curl_short() {
  local url=$1; shift;
  local max_time=$1

  max_time=${max_time:-3}

  curl --location --max-time "${max_time}" --fail --silent "${url}" 2>/dev/null
}
